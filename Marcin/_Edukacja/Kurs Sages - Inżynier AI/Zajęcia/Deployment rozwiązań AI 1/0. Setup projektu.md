# Setup projektu

## Pobranie i instalacja środowisk

1. Na maszynce wirtualnej stwórz sobie foldery, w którym będziesz trzymał repozytorium z kodami.

Propozycja nazw folderów:

1. `inzynier-ai-api-live-coding`
2. `inzynier-ai-api-exercises`
3. `inzynier-ai-api-project`

Przykład: 

```bash
mkdir NAZWA_FOLDERU
```

2. Wejdź do każdego z nich niego i zclonuj repozytoria

1. dla folderu `inzynier-ai-api-live-coding` repozytorium https://gitlab.com/inzynier-ai/api/live-coding
2. dla folderu `inzynier-ai-api-exercises` repozytorium https://gitlab.com/inzynier-ai/api/exercises
3. dla folderu `inzynier-ai-api-project` repozytorium https://gitlab.com/inzynier-ai/api/project

Przykład (polecam wstawić kropkę `.` aby zclonować do obecnego folderu)

```bash
cd NAZWA_FOLDERU_Z_PROJEKTEM
git clone ADRES_REPOZYTORIUM .
```

3. W każdym z nich (zakładam, że znajdujesz się w folderze z repozytorium):
	1. utwórz wirtualne środowisko korzystając z `venv` (zwróć uwagę abyś stworzył to korzystając z `python3.11`)

```bash
cd NAZWA_FOLDERU_Z_PROJEKTEM
python3.11 -m venv venv
```

2. Aktywuj je:

```bash
source venv/bin/activate
```

3. Zainstaluj wymagane biblioteki:

```bash
pip install -r requirements.txt
```

4. Pobierz/stwórz model, który będzie wykorzystywany w danym repozytorium:

```bash
export PYTHONPATH=`pwd`
make model
```

6. **Zdezaktywuj wirtualne środowisko zanim przejdziesz do ustawiania następnego repozytorium**

```bash
deactivate
```


## Dodatkowe rzeczy sprawdzające tylko dla repozytorium, używanego podczas live codingu

Prośba o to aby dla repozytorium `inzynier-ai-api-live-coding` wykonać dwie dodatkowe rzeczy sprawdzające czy wszystko działa:

1. Otwórz **pierwszy** terminal, w którym:
	1. Wejdziesz do folderu z projektem `inzynier-ai-api-live-coding`
	2. Uruchomisz środowisko poprzez `
	```bash
	source venv/bin/activate
	```
	
	3. Ustawisz zmienną środowiskową:
	
	```bash
	export PYTHONPATH=`pwd`
	```
	
	4. Uruchomisz API poprzez:
	
	```bash
	make api
	```
	
	5. Powinieneś zobaczyć output w postaci:
	
	```
	INFO: Started server process [PROCESS_ID]
	INFO: Waiting for application startup
	INFO: Aplication startup complete.
	INFO: Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
	```

1. Teraz otwórz **drugi** terminal, w którym:
	1. Wejdziesz do folderu z projektem `inzynier-ai-api-live-coding`
	2. Uruchomisz środowisko poprzez `
```bash
source venv/bin/activate
```

3. Ustawisz zmienną środowiskową:

```bash
export PYTHONPATH=`pwd`
```

4. Wyślesz requesta do API poprzez:

```bash
make request
```

5. Powinieneś otrzymać **w drugim terminalu** odpowiedź o treści:

```
Received response.status_code=200
Received reponse.json()='DECLINE'
```

6. Pierwszy terminal z uruchomionym API powinien wskazywać na:

```
INFO: 127.0.0.1:PORT - "POST /predict_decision HTTP/1.1" 200 OK
```

## Utworzenie projektów w PyCharmie

Prośba o utworzenie nowych projektów w PyCharmie, wskazujących na skonfigurowane i zainstalowane ręcznie repozytoria. 

1. Wejdź do PyCharma i wybierz w lewym górnym rogu: File -> Open...
2. Wskaż na folder z projektem i kliknij OK
3. Kliknij "Trust Project" jeśli pojawi się dodatkowe okienko 

Teraz musimy w PyCharmie wskazać nasze środowisko. Teoretycznie zrobi to sam po jakimś czasie, ale nie wiem jak długo trzeba na to czekać, więc lepiej zrobić to ręcznie.

1. Następnie kliknij ponownie w prawym lewym górnym rogu: File -> Settings
2. W nowym okienku, po lewej stronie znajdź sekcję z ustawieniem danego projektu np. `Project: inzynier-ai-api-live-coding` (jeśli nazwałeś zgodnie z sugestiami).
3. Rozwiń ją i wybierz Python Interpreter
4. Następnie w prawym górnym rogu tego okienka wybierz Add interpreter -> Add Local Interpreter
5. Następnie w nowym okienku po lewej stronie wybierz Virtualenv Environment
6. Wybierz opcję `Existing`
7. Następnie w `Interpreter` wskaż bezpośrednio interpreter, który znajduje się w Twoim repozytorium w `venv/bin/python3.11`.
8. Zatwierdź wszystko.
9. Aby się utwierdzić, że to działa, otwórz terminal w PyCharmie i wpisz:

```bash
which python
```

I powinno wskazywać na ścieżkę do interpretera w naszym środowisku

10. Dla dodatkowego upewnienia się, możesz uruchomić dodatkowe kroki zdefiniowane wyżej w sekcji "*Dodatkowe rzeczy sprawdzające tylko dla repozytorium, używanego podczas live codingu*"

