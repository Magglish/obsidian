# Czym jest API?

1. Definicja API to Application Programming Interface, ale same rozwinięcie skrótu zapewno jeszcze nic Wam nie wyjaśnia. Moim zdaniem najlepiej o API mówi się w konkretnym kontekście:
	1. API jako element systemu (serwis/usługa)
	2. API jako kontrakt/umowa
	3. API jako produkt
2. API jako element systemu (serwis/usługa) - jeśli myślimy o API jako o elemencie systemu, to jest to nic innego jak pewien sposób/mechanizm komunikacji pomiędzy dwoma różnymi systemami, który zawiera w sobie pewne zasady komunikacji (o tych zasadach powiem więcej w kolejnym punkcie). 
   Przykład (jakaś aplikacja finansowa na przykładzie Revoluta): widzimy na tym slajdzie pewną aplikację z podziałem na jej częśc frontową i backendową. W tym przypadku, my jako użytkownicy poruszając się po aplikacji możemy wywoływać pewne akcje (pokaż dane, przelicz kurs, wymień waluty, weź kredyt), które pod spodem tak na prawdę są pewnymi żądaniami/zapytaniami wysyłanymi do konkretnych komponentów w naszym systemie. Ten system może składać się z wielu mniejszych elementów i w każdym z nim jest serwis, który wystawia swoje API aby móc komunikować się z innymi systemami. 
   W momencie wejścia do aplikacji, wyświetlane są nasze dane - to moje być jednoznaczne z tym, że system wysyła zapytanie do serwisu aby pobrać dane. Serwis otrzymuje te zapytanie i odsyła spowrotem dane, które są wyświetlane na froncie. Dalej jeśli prosimy o wymiane swojej waluty, również są wysyłane żadania o przeliczenie po aktualnym kursie, wymianie pieniędzy i zapisanie tych informacji w bazach danych. Możemy zlecić przelew do innego osoby i na pewno w ramach działania zostanie uruchomiony również komponent MLowy - tutaj konkretnie modele AMLowe, które mogą określić czy transakcja nie jest podejrzana. Na pewno czasami w życiu trafił Wam się taki case, że Revolut albo inny serwis, w trakcie Waszej podróży za granicą, odrzucił Wam płatność kartą - to jest właśnie działanie (uproszczone) pokazane na tym slajdzie - modele AMLowe stwierdziły, że transakcja jest podejrzana i jej nie zaakceptowały. To wszystko odbyło się poprzez komunikacje z serwisem API do modeli AML, który na podstawie przesyłanych do niego danych (w tym przypadku wszelkie niezbedne informacje o transakcji) określiły, że transakcja jest podejrzana i taką informację API zwróciło. Potem może być krok, w którym jesteśmy zainteresowani wzięciem np. jakiegoś kredytu i to też uruchamia szereg różnych odpytań o odpowiednie komponenty - na pewno wśród nich będzie odpytanie o model scoringowi. Itd. itd.  Takie systemy są oczywiście bardzo rozwinięte, a to co tutaj prezentuje to jest bardzo uproszczony przykład - ale tylko żeby wytworzyć w Was intuicje jak to może wyglądać.  
   Przykład Twitter: 
   [Uproszczony Twitter](https://blog.bytebytego.com/i/53107294/interview-question-design-twitter)
   [Twitter algorithm](https://blog.twitter.com/engineering/en_us/topics/open-source/2023/twitter-recommendation-algorithm)
   Spójrzmy sobie na przykład Twittera - to co widzicie to jest bardzo uproszczony schemat działania Twittera - wydaje mi się, że narysowanie wszystkich elementów tego systemu byłoby po prostu niemożliwe. Graf został wzięty z bloga bytebytego, który moim zdaniem jest najlepszym blogiem technicznym do śledzenia, ale o tym blogu powiem więcej na samym końcu zajęć z deploymentu, gdzie wspomne Wam co warto śledzić aby dalej się w tym tematach rozwijać. Co omożemy tu zobaczyć: jak widzicie napisanie Tweeta powoduje wywołanie jakiegoś API "Write API". Wywołanie tego API powoduje szereg kolejnych operacji i interakcji z kolejnym elementami systemu. Ostatecznie widzicie, że ten tweet który powstał wpada do konkretnych serwisów, które odpowiedzialne są za pokazanie tego tweeta w sekcji discovery, search oraz na waszej osi czasu. Oprócz tego możecie otrzymać też notyfikację o tym tweecie. No ale tweetów jest cała masa, więc trzeba jakoś je odfiltrowywać. I w całym tym systemie Twittera działa również ich algorytm rekomendacyjny. Na tym zdjęciu widzicie wykres z czego on się składa - omówienie tego algorytmu to jest inny temat, ale to co chce pokazać to początek oraz koniec. Jak widzicie mamy tutaj dane graphie tego kto śledzi Was, o zaangażowaniu tweeta oraz o waszych danych, a na końcu zobaczcie - mamy Timeline, czyli decyzja o tym czy wam ten tweet pokazać. Czyli tak na prawdę ten algorytm który Wam pokazuję to nic innego jak ten klocuszek "Timeline Service" - i komunikacja pomiędzy nimi odbywa się poprzez API.
3. API jako kontrakt/umowa - zastanawiacie się zatem - ok ale jak wygląda komunikacja pomiędzy tymi systemami. Tutaj pomoże Wam zrozumienie API w kontekście kontraktu/umowy. O co tutaj chodzi. To co tutaj widzicie na slajdzie to dokumentacja API, którą będziemy tworzyć (technicznie rzecz biorąc ona będzie tworzyć się automatycznie na podstawie naszego kodu, ale będziemy też ją modyfikować i usprawniać aby w pełni dokumentowała to jak działa nasze API). Co my tutaj widzimy? Widzimy podstawowe informacje jakie są wymagane aby skorzystać z naszego API - są dane wejściowe których oczekujemy - informacja o tym w jakim one muszą być formacie, jakie wartości mogą przyjmować. Jeżeli do API wyślemy dane zgodnie z tą dokumentacją to otrzymamy odpowiedź z API też zgodnie z tą dokumentacją - czyli jak widzicie predykcję w takim formacie o takich wartościach itd. itd. 
   Jak to należy rozumieć? API można traktować jako pewien kontrakt/umowa, a treść tej umowy stanowi dokumentacja tego API. Czyli są tutaj zawarte informacje o tym, co należy do API wysłać, co z niego otrzymamy oraz jak widzicie również są też informacje o błędach na wypadek gdyby problem był po naszej stronie (np. wysłaliśmy dane w złym formacie) oraz błędy po stronie samego serwisu, jeżeli coś nie uda się przez API przetworzyć, ale jest to bezpośrednio związane z logiką działania API. Ok, czyli do tego momentu wiemy o tym, że API jest elementem pewnego systemu, jest to odddzielny komponent całości - wiem, że są tutaj osoby już doświadczone, więc na pewno spotkaliście się może z takim pojęciem jak architektura mikroserwisowa i to co było prezentowane na poprzednim slajdzie jest przykładem takiej architektury, ale o samej architekturze mikroserwisowej powiemy sobie zjeździe poświęconym Kubernetesowi. Teraz na ten moment, chciałbym żebyście podchodzili do API jako do pewnej mniejszej części