# Middleware

[[L1. Logowanie|Tematyka Middleware jest bezpośrednio powiązana z logowaniem. Najpierw trzeba omówić logowanie]]

(TE ZDJĘCIE ZRÓB PO SWOJEMU - brakuje na nim jeszcze Reverse Proxy)
![[API Framework.png]]

https://www.youtube.com/watch?v=Y1WaF7k07NE&t=1590s

1. Aby móc zaimplementować... powiązanie logów ze sobą, musimy najpierw spojrzeć w bebecy FastAPI i poznać jeden bardzo ważny komponent w nim, który pozwoli Nam zaimplementować to co chcemy
2. W rzeczywistości to nie jest tak, że request który wysyłamy do naszego API trafia od razu bezpośrednio do tej funkcji, którą zdefiniowaliśmy - musi on pokonać pewną drogę. To co widzicie na tym wykresie to proces przetwarzania requesta przez Pythonowe frameworki do tworzenia API - jest to prawdziwe dla Flaska, FastAPI, czy Litestara i innych frameworków.
3. Ten obrazek to jest na razie rzut na części składowe naszego API zdeployowane na jakimś serverze, czy tak jak w naszym przypadku na lokalnym komputerze - potem na kolejnych zjazdach, zobaczycie, że ścieżka dojścia naszego requesta do API jest znacznie, znacznie dłuższa, ale to poznacie w odpowiednim czasie. Na razie skupmy się na tym co widzimy.
4. Zaczynając od lewej strony
	1. Mamy Nas bądź jakiś inny system który wysyłą requesta. Zanim ten request przyjdzie, musi pokonać on pewną drogę
	2. Na drodzę praktycznie we wszystkich przypadkach, na produkcji będzie reverse proxy. O reverse proxy będziemy rozmawiać dopiero na 3-cim zjeździe, nie teraz.
	3. Następnie mamy server WSGI albo ASGI - czym jest WSGI a czym jest ASGI będziemy mówić dzisiaj, ale przy temacie związanym z asynchronicznością.
	4. Dalej mamy naszą aplikacje - czyli innymi słowy proces, który odpowiedzialny za działanie naszego API - czym jest ten proces to też poznacie przy temacie związanym z asynchronicznością.
	5. I trafiamy w końcu na Router, Middleware i Widok. I to jest to co teraz możemy omówić
	6. Czym jest Router? Sprawa jest banalna. Jest to implementacja odpowiedzialna za przekierowanie naszego kodu do odpowiedniego endpointa. My definiujemy Routera poprzez `@app.post("/decisions")`, czy też 




Pytanie:
Kiedy implementacja middleware a kiedy implementacja w widoku? Jeśli coś co implementujemy dotyczy wszystkich requestów i/lub wszystkich odpowiedzi, to zrobiłbym to w Middleware, a jeśli jest to specyficzne dla danego Endpointa, to wtedy w tym widoku