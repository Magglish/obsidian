# Czym jest kontener, jego zalety i wady

### TUTAJ MÓWIŁEŚ, ŻE ZALETY I WADY KONTENERÓW OMÓWISZ TROCHE PÓŹNIEJ, ALE CHYBA PATRZĄC NA DALSZE NOTATKI Z MODUŁOW TO BRAKUJE OMÓWIENIA TYCH WAD I ZALET ZATEM MOZE TUTAJ TO DODAJ JEDNAK?

Zaczniemy sobie odpowiedzi na podstawowe pytanie - czym jest kontener?

Zakładam że część z was może się domyślać już co to jest, na podstawie szybkiego quick startu, który przed chwilą mieliśmy. Kontener można zdefiniować jako obiekt, wirtualny zasobnik, mieszczący aplikacje, czyli w naszym przypadku nasz kod na API, wraz ze wszelkimi niezbędnymi plikami, w naszym przypadku może to być model, konfiguracjami, zainstalowanymi bibliotekami, zależnościami itd. niezbędnymi do tego aby móc uruchomić aplikację zawartą w tym kontenerze.

Czyli generalnie patrząc na nasze repozytorium na docker hubie to te dwie wersje które stworzyliśmy i wysłaliśmy to właśnie nasze kontenery, z kodem na nasze API wraz z niezbędnymi obiektami, tudzież model, wymagający, żeby te API uruchomić. Kontenery posiadają odpowiednie tagi oznaczające jaka to jest wersja - mamy pierwszą i drugą wersję. 

Następnie po utworzeniu kontenerów i zpushowaniu ich do repozytorium, pobraliśmy sobie te obrazy do siebie loklanie na komputer i mogliśmy spokojnie je uruchomić zarówno pierwsza wersją jak i drugą.

W ten oto sposób doświadczyliście dwóch najważniejszych zalet stosowania kontenerów.  Ja o zaletach i wadach powiem troszkę później, jak już jak już zdobędziemy większą wiedzę o kontenerach. Natomiast to co tutaj zobaczyliście to przede wszystkim łatwość w przenoszeniu i opublikowaniu swoich aplikacji wykorzystując kontenery. Tak naprawdę całość opiera się o to aby móc je stworzyć i zapisać w jakim repozytorium.  Jednym z takich repozytorium jest Docker Hub któremu dokładniej przyjrzymy się później ale generalnie jest to ogólne repozytorium w którym znajdziecie wszystkie obrazy, które możecie wykorzystać do budowy swoich kontenerów. Następnie pobraliśmy je i zobaczcie że nie musieliśmy konfigurować żadnego środowiska tylko po prostu je uruchomiliśmy. Drugą zaletę którą zobaczyliście to to, że kontener ma swoje własne środowisko i jest ona wyizolowane od waszego znajdującego się na komputerze. Tak jak powiedziałem, nie musieliście nic więcej konfigurować - bo cała konfiguracja i całe środowisko jest już zawarte w kontenerze. A zatem macie gwarancję tego że po prostu kontener nie rozwali wam waszego środowiska. 
  
**TEN OBRAZEK ZREDAGUJ POD SIEBIE**

![[Traditional vs VM vs Container.png]]  

Żeby do końca zrozumieć czym jest kontener, to musimy spojrzeć na niego z szerszej perspektywy i porównać go z fizyczną maszyną oraz z Wirtualną maszyną na której teraz pracujecie. Ja nie będę wnikał w szczegóły czym jest fizyczna maszyna, wirtualna maszyna i ich zalety i wady. Wspomnę tylko krótko o nich, natomiast największą uwagę poświęcamy na tym zjeździe właśnie na kontenery.

Spójrzmy sobie na ten obrazek na którym  przedstawiony jest nasz komputer fizyczny, maszynę wirtualną oraz kontener. W każdym z nich mamy pewne warstwy, które symbolizują konkretne elementy tych obiektów, - patrząc od góry do dół, mamy bardziej szczegółowe elementy do bardziej ogólnego elementu.

Po lewej mamy oczywiście nasz tradycyjny komputer fizyczny - hardware,  system operacyjny na którym pracujecie na co dzień,  i jakieś aplikacje które są tam uruchomione. Te obiekty App mogą być również  projektami PyCharmowymi, które przed chwilą stworzyliśmy,  jeden poświęcony jest lifecodingu, drugi poświęcony ćwiczeniom, a trzeci projektowi. Każda z aplikacji korzysta w pełni z zasobów jakie są dostępne na naszej fizycznej maszynie. W dodatku też ta aplikacja musi być stworzona w taki sposób aby działała na naszym systemie operacyjnym. Gdybyśmy chcieli wdrożyć nasze aplikacje po prostu na fizycznej maszynie to oczywiście musimy zadbać o to aby żadne te aplikacje nie wpływy na siebie i aby nie wpływało też na system operacyjny,  tak żebyśmy mieli gwarancję, że nic się nie popsuje.  

Drugim obiektem na środku jest nasza wirtualna maszyna.  Tak jak widzicie warstwa hardware i operating system nie zmienia się, to znaczy że wirtualna maszyna działa wciąż na naszym fizycznym serwerze. W naszym przypadku jest to nasze Ubuntu, na którym pracujecie. Maszyna wirtualna jak widzicie na obrazku ma swój własny system operacyjny,  własne oprogramowanie oraz uruchomione są tam jakieś na tej maszynie wirtualnej. Wszystko jest to możliwe za pomocą technologii tutaj na obrazku określana jako Hypervisor czyli krótko mówiąc technologia umożliwiająca tworzenie maszyn wirtualnych. No i my z tej technologii korzystamy teraz żebyśmy mogli pracować na tym samym jednym systemie operacyjnym czyli Ubuntu, dzięki czemu unikamy wszelkich problemów związanym z różnicami w systemach operacyjnych, które w naszym świecie Data Scienciowych są - na przykład popularna biblioteka do sieci neuronowych tensorflow zakończyła swoje wsparcie dla windowsa, biblioteka [RAPIDS](https://rapids.ai/) od Nvidii, która pozwala na przetwarzanie danych na GPU czy np. [ray]([https://www.ray.io/](https://www.ray.io/)), który pozwala na przetwarzanie na wieluprocesach jednocześnie nie działają na Windowsie. Inne biblioteki mają problemy z kompilacją. Więc generalnie tak przy okazji powiem wam, że jeżeli chcecie pracować w Data Science bez żadnych problemów To musicie zrezygnować z Windowsa i przesiąść się na Systemy unixowe, na przykład Ubuntu albo Mac. Krótko mówiąc maszynki wirtualne pozwalają nam na stworzenie wirtualnego systemu komputerowego na jakim fizycznym serwerze.   

Teraz przejdźmy sobie do najważniejszego punktu, czyli ten obrazek po prawej stronie  rysującego wam architekturę z wykorzystaniem kontenerów. Jak widzicie jest on dosyć podobny do wirtualnej maszyny, ale zamiast Hypervisora mamy tak zwany Container Runtime, czyli środowisko uruchomieniowe kontenerów - co to jest to już jest temat dosyć zaawansowany i o tym porozmawiamy sobie później jak już nabędziemy więcej wiedzy w obszarze kontenerów. To co jest bardzo ważne w tej kwestii to to że kontener nie jest już wirtualną maszyną. To nie jest wydzielony obiekt posiadający swój własny system operacyjny. On w pełni opiera się i korzysta z systemu operacyjnym na którym został ten kontener uruchomiony. Pytanie czy kontener może wpłynąć w ten sposób na system operacyjny - domyślnie nie ale oczywiście można mu nadać dostęp do plików które są krytyczne dla działania naszego systemu operacyjnego i z poziomu kontenera je pozmieniać ale nikt tak nie robi. Wręcz przeciwnie - kontener jest dodatkowo warstwą oddzielającą aplikację od działania systemu operacyjnego i tak naprawdę korzystając z kontenerów możemy nawet zwiększyć bezpieczeństwo naszych aplikacji. W związku z tym że kontener używa  systemu operacyjnego na którym został on uruchomiony niesie ze sobą pewną wadę.  Kontener stworzony do tego żeby działał na systemie Linuxowym nie zadziała na żadnym innym systemie. Ale generalnie to nie będzie problem, dlatego, że kontenery wykorzystuje się z myślą o wdrożeniach aplikacji na produkcję, a z kolei systemy produkcyjne w 99% opierają się o systemy Linuxowe. Oczywiście zdarzają się wyjątki i są systemy postawione np. na Windows Server, ale powiedziałbym, że to jest rzadkość. Na pewno wszelkie usługi w chmurze, z których będziecie korzystać jak i też klastry obliczeniowe będą działały na systemach Linuxowych. Ciekawostka: Nawet jeżeli wykorzystujecie Windowsa i pracujecie na Docker w wersji Desktop to i tak i tak Windows wymaga od Was włączenia hypervisora, ponieważ w momencie uruchomienia dockera na windowsie i tak pod spodem uruchamiana jest mini-VMka bazująca na systemie Linuxowym i dopiero na tej mini-VMce uruchamiany jest Wasz kontener. 
  
Jak widzicie też oprócz systemu operacyjnego korzysta on też z waszego hardware.  W przypadku wirtualnej maszyny zawsze definiowaliśmy sobie pojemność dysku, ilość CPU  oraz ilość Ramu jaką przydzielamy wirtualnej maszynie. Tutaj w przypadku kontenera domyślnie korzysta on w pełni z waszych zasobów dostępnych na maszynie na której on działa. Ale jest możliwość żeby zaalokować ile maksymalnie może wykorzystywać dysku, ile maksymalnie pamięci RAM, ile maksymalnie może wykorzysytywać coreów i też będziemy to robić.  

Czyli podsumujmy sobie to co do tej pory powiedzieliśmy na temat tego czym jest kontener: 

Kontener jest to wyizolowany, wirtualny obiekt zawierający w sobie kod i niezbędne pozostałe komponenty do tego aby go uruchomić - W naszym przypadku API to naszego modelu,  sam model który jest potrzebny do tego żeby wykonać predykcję  No i nasze środowisko czyli zainstalowane pakiety i tak dalej które są wymagane do tego żeby nasz kod zadziałał. Kontener uruchomiony jest na naszym systemie operacyjnym i korzystają z naszego systemu operacyjnego. Co dokładnie oznacza korzystanie z naszego systemu operacyjnego - powiemy sobie później. Korzysta również w pełni z naszego hardware, dopóki sami tego nie ograniczymy w momencie uruchomienia konteneru. 

**TUTAJ POLACZENIE TYCH TRZECH OBRAZKOW W JEDNO**

Teraz z tymi trzeba pojęciami jak fizyczny komputer, maszyna Wirtualna i kontener będziecie spotykać się cały czas, dlatego bardzo istotne jest to, aby móc je odróżnić. Ponieważ typową produkcję możemy wizualizować w następujący sposób:

1. Wszystko co wdrażamy opiera się o jakiś fizyczny serwer na którym dostępny jest system operacyjny operacyjny oraz hardware. 
2.  na tym fizycznym serwerze uruchamiane są w wirtualne maszyny,  Zgodnie z tym co jest wymagane do tego aby nasze aplikacje działa na produkcji.
3.  następnie na tej wirtualnych maszynach uruchamiane są dopiero kontenery które stanowią konkretne aplikacje działające i wykonujące swoją pracę.
  
Ten schemat, który Wam przedstawiam Stanowi waszą przysłowiową produkcję na której będziecie wdrażać wasze rozwiązania. Generalnie jest to typowy przykład produkcji, a w szczególności chmury. Dlaczego?  Chmura to nic innego jak zestaw pewnych serwerów, które stoją sobie gdzieś tam w jakiejś lokalizacji.  Nasze serwery czy też klastry obliczeniowe, które definiujemy w chmurze to nic innego jak zestaw wirtualnych maszyn uruchomionych na tych fizycznych serwerach.  A my z kolei wdrażamy nasze kontenery z naszymi aplikacjami na tych wirtualnych maszynach. 

To jest to co chciałbym na ten moment przekazać wam w kontekście tego czym jest kontener. Wraz z kolejnymi modułami  i będziemy coraz w niego wchodzić. 

Czy macie jakieś pytania do tego momentu?



